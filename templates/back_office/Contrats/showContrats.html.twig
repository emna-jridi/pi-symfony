{% extends 'baseAdmin1.html.twig' %}

{% block title %}Détails du contrat{% endblock %}

{% block body %}
<div class="container mt-5">
    <h1 class="mb-4 text-primary text-center">Détails du Contrat du client</h1>
    
    <div class="card">
        <div class="card-body">
            <table class="table table-striped">
                <tbody>
                
                    <tr>
                        <th>Nom du client</th>
                        <td>{{ contrat.NomClient }}</td>
                    </tr>
                    <tr>
                        <th>Email du client</th>
                        <td>{{ contrat.EmailClient }}</td>
                    </tr>
                    <tr>
                        <th>Téléphone du client</th>
                        <td>{{ contrat.telephoneClient }}</td>
                    </tr>
                    <tr>
                        <th>Date de début</th>
                        <td>{{ contrat.DateDebutContrat|date('d-m-Y') }}</td>
                    </tr>
                    <tr>
                        <th>Date de fin</th>
                        <td>{{ contrat.DateFinContrat|date('d-m-Y') }}</td>
                    </tr>
                    <tr>
                        <th>Montant</th>
                        <td><strong>{{ contrat.MontantContrat }} TND</strong></td>
                    </tr>
                    <tr>
                        <th>Status du contrat</th>
                        <td>
                            {% if contrat.StatusContrat == 'Actif' %}
                                <span class="badge bg-success">Actif</span>
                            {% else %}
                                <span class="badge bg-warning">Inactif</span>
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <th>Mode de paiement</th>
                        <td>{{ contrat.modePaiement ? contrat.modePaiement.value : '-' }}</td>
                    </tr>

                    {# Affichage des services associés #}
                    <tr>
                        <th>Services associés</th>
                        <td>
                            {% if contrat.contratServices is not empty %}
                                <ul>
                                {% for contratService in contrat.contratServices %}
                                    <li>{{ contratService.service.NomService }} ({{ contratService.service.TypeService }}) - {{ contratService.service.DescriptionService }}</li>
                                {% endfor %}
                                </ul>
                            {% else %}
                                <p>Aucun service associé.</p>
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <div class="text-center mt-4">
                <a href="{{ path('list_c') }}" class="btn btn-primary mb-3">Retour à la liste des contrats</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
